import'dart:math';import'package:flutter/material.dart';import"package:flare_flutter/flare_actor.dart";import'package:camera/camera.dart';void main()=>runApp(App());class App extends StatefulWidget{@override AppState createState()=>AppState();}class AppState extends State<App>{var a="Intro";var ca=CameraController(null,null);var s=true;var textControll=TextEditingController();var h=50.0;var h1=500.0;var h2=300.0;bool caInit=false;Widget caCont=Container();init()async{var r=await availableCameras();ca=CameraController(r[0],ResolutionPreset.medium);ca.initialize().then((_){if(!mounted){return;}setState((){});});}@override void initState(){super.initState();init();}@override void dispose(){ca?.dispose();super.dispose();}@override Widget build(c){if(!ca.value.isInitialized){return Container();}return MaterialApp(home:Scaffold(backgroundColor:Color(0xFF036182),body:Stack(fit:StackFit.expand,children:[FlareActor("ani/W.flr",alignment:Alignment.center,fit:BoxFit.cover,animation:"Wobble"),Column(children:[Padding(padding:EdgeInsets.only(top:60.0,bottom:30.0),child:Center(child:Text("Cut My Pizza",style:TextStyle(color:Colors.white,fontSize:30.0),))),(s)?Container(height:(h==50.0)?h1:h2,child:SizedBox(height:(h==50.0)?h1:h2,width:(h==50.0)?h1:h2,child:FlareActor("ani/P.flr",alignment:Alignment.center,fit:BoxFit.fitHeight,animation:"Full"),)):Padding(padding:EdgeInsets.only(top:(h==50.0)?h:0.0),child:Stack(children:[Container(width:h2,height:h2,child:ClipRRect(borderRadius:BorderRadius.circular(h2),child:OverflowBox(alignment:Alignment.center,child:FittedBox(fit:BoxFit.cover,child:Container(width:h2,child:AspectRatio(aspectRatio:ca.value.aspectRatio,child:CameraPreview(ca))))))),Container(width:h2,height:h2,child:RotatedBox(quarterTurns: -1,child: CustomPaint(foregroundPainter:P(amPiece:double.parse(((textControll.text??"")!="")?textControll.text:"0.0")))),)],),),Expanded(child:Container()),Padding(padding:EdgeInsets.all(8.0),child:Card(shape:RoundedRectangleBorder(borderRadius:BorderRadius.circular(h2/10)),color:Color.fromRGBO(3,97,130,0.2),child:Container(height:h,child:Column(mainAxisSize:MainAxisSize.max,crossAxisAlignment:CrossAxisAlignment.stretch,children:[IconButton(icon:Icon((h==50.0)?Icons.keyboard_arrow_up:Icons.keyboard_arrow_down,color:Colors.white),onPressed:(){setState((){(h==50.0)?h=h2-100:h=50.0;});}),Padding(padding:EdgeInsets.all(8.0),child:TextFormField(onFieldSubmitted:(_){setState((){});},controller:textControll,style:TextStyle(color:Colors.white),keyboardType: TextInputType.numberWithOptions(),decoration:InputDecoration(labelText:'Pieces',labelStyle:TextStyle(color:Colors.white),border:OutlineInputBorder()))),Row(mainAxisAlignment:(!s)?MainAxisAlignment.spaceBetween:MainAxisAlignment.end,children:[(!s)?Padding(padding:EdgeInsets.only(top:16.0,left:14.0),child:FloatingActionButton(child:Icon(Icons.navigate_before),backgroundColor:Color(0xFF0071bc),onPressed:(){setState((){a="Full";s=!s;});})):Padding(padding:EdgeInsets.only(top:16.0,right:14.0),child:FloatingActionButton(child:Icon(Icons.navigate_next),backgroundColor:Color(0xFF0071bc),onPressed:(){if(s){setState((){a="Full";s=!s;});}else{setState((){});}})),],)]))))])])));}}class P extends CustomPainter{P({this.amPiece});final double amPiece;Map xyOnArc(cx,cy,rad,radAng){var x=cx+rad*cos(radAng);var y=cy+rad*sin(radAng);return({"x":x,"y":y});}@override void paint(Canvas can,Size s){var paint=Paint()..style=PaintingStyle.stroke..color=Colors.orange..strokeWidth=5.0;can.drawArc(Rect.fromLTWH(0,0,300,300),0,2.0*pi,false,paint);var p=100/amPiece;var op=0.0;for(var index=0;index<amPiece;index++){Map e=xyOnArc(150.0,150.0,150.0,((2/100)*(op+p))*pi);op+=p;var epx=e["x"];var epy=e["y"];can.drawLine(Offset(150.0,150.0),Offset(epx,epy),paint..strokeWidth=3);}}@override bool shouldRepaint(CustomPainter oldDelegate)=>true;}